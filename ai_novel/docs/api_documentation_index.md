# API ドキュメンテーションインデックス

このドキュメントは、AI Novel Writing Systemのフロントエンド（Next.js）とバックエンド（Django）間のAPI連携に関する各種ドキュメントへの総合インデックスです。APIの設計、実装、テスト、トラブルシューティングに関する情報を体系的に整理しています。

## 📚 ドキュメント一覧

### 設計・アーキテクチャ

1. [**API ルーティングのベストプラクティス**](api_routing_best_practices.md)
   - API URLの設計指針と推奨パターン
   - クエリパラメータ形式の実装例
   - 安定したルーティング構造の実現方法
   - *2025/3/14更新*

2. [**API エンドポイントマッピング**](api_endpoint_mapping.md)
   - バックエンドとフロントエンドのエンドポイント対応表
   - データモデルとフロントエンド型定義の比較
   - 推奨フロントエンドURL形式一覧
   - *2025/3/14更新*

3. [**API 統合計画**](api_integration_plan.md)
   - API不整合解消プロジェクトの実施計画
   - 段階的な移行戦略
   - 新APIルーティング設計の指針
   - *2025/3/14更新*

### 実装・修正ガイド

1. [**API コード修正ガイド**](api_code_fixes.md)
   - 具体的なコード修正例
   - 型定義の統一方法
   - fetchApiヘルパー関数の使用方法

2. [**API 接続問題の修正**](api_connection_fix.md)
   - 接続エラーのトラブルシューティング
   - CORS設定
   - プロキシ設定の最適化

### エンドポイント詳細

1. [**あらすじ詳細生成 API**](plot_detail_api.md)
   - 小説の詳細あらすじ（3幕）を生成するためのAPI
   - リクエスト・レスポンス形式
   - エラーハンドリング
   - *2025/3/18更新*

2. [**エピソード管理 API**](episode_management_api.md)
   - 小説のエピソード作成・取得・更新・削除API
   - エピソード順序の入れ替え機能
   - リクエスト・レスポンス形式
   - エラーハンドリング
   - *2025/3/20更新*

3. [**エピソード本文生成 API**](episode_content_api.md)
   - エピソード本文の生成・取得・更新・削除API
   - リクエスト・レスポンス形式
   - エラーハンドリング
   - *2025/3/20更新*

### テスト・検証

1. [**API テストガイドライン**](api_test_guidelines.md)
   - APIテストスクリプトの実装方法
   - バックエンド・フロントエンド・比較テストの手順
   - テストモードの説明
   - CI/CDパイプラインへの組み込み方法

2. [**Django / Next.js 一気通貫テスト**](django_nextjs_e2e_testing.md)
   - エンドツーエンドテストのフレームワーク
   - テスト環境のセットアップ
   - テストケースの作成方法

## 🔄 推奨ワークフロー

APIに関する作業を行う際は、以下のワークフローに従うことを推奨します：

1. **設計段階**
   - [API ルーティングのベストプラクティス](api_routing_best_practices.md)を参照
   - [API エンドポイントマッピング](api_endpoint_mapping.md)で既存のパターンを確認

2. **実装段階**
   - バックエンドエンドポイントの実装
   - フロントエンドのプロキシAPI実装（クエリパラメータ形式で）
   - 型定義の整備

3. **テスト段階**
   - [API テストガイドライン](api_test_guidelines.md)に沿ったテストスクリプトの実装
   - バックエンド直接アクセステスト
   - フロントエンドアクセステスト
   - 比較テスト

4. **デプロイ段階**
   - CI/CDパイプラインでのテスト実行
   - 段階的なデプロイと監視

## 📝 最近の更新

| 日付 | 更新内容 |
|------|--------|
| 2025/3/14 | 新しいAPIルーティング設計の導入（クエリパラメータ形式） |
| 2025/3/14 | API エンドポイントマッピングの更新 |
| 2025/3/14 | API ルーティングのベストプラクティスドキュメント作成 |
| 2025/3/14 | API ドキュメンテーションインデックス作成 |
| 2025/3/18 | あらすじ詳細生成APIドキュメント追加 |
| 2025/3/20 | エピソード管理APIドキュメント追加 |
| 2025/3/20 | エピソード本文生成APIドキュメント追加 |

## 🚀 次のステップ

1. **既存APIの新形式への移行**
   - 優先順位：基本設定データ > キャラクター > プロット > エピソード
   - 移行スケジュールの策定
   - 移行テスト計画の作成

2. **新規API実装**
   - 全て新しいクエリパラメータ形式で実装
   - テンプレートコードの整備
   - 共通ユーティリティの強化

3. **ドキュメントの継続的更新**
   - 実装状況に合わせたドキュメント更新
   - 新しいベストプラクティスの追加
   - APIテストの自動化と報告
